App = Em.Application.create({
    rootElement: $(".view-container")
}), App.Router.map(function() {
    this.resource("subjects", function() {
        this.resource("subject", {
            path: "/:id"
        }, function() {
            this.route("edit");
        }), this.route("add");
    });
}), App.IndexRoute = Ember.Route.extend({
    model: function() {
        return "subjects";
    },
    afterModel: function(a) {
        this.transitionTo(a);
    }
}), App.SubjectsRoute = Ember.Route.extend({
    model: function() {
        return this.store.find("subject");
    }
}), App.SubjectRoute = Ember.Route.extend({
    model: function(a) {
        return this.store.find("subject", a.id);
    }
});

var get = Ember.get, forEach = Ember.ArrayPolyfills.forEach;

DS.WebAPIAdapter = DS.RESTAdapter.extend({
    defaultSerializer: "DS/WebAPI",
    corsWithCredentials: !0,
    createRecord: function(a, b, c) {
        var d = {};
        d = a.serializerFor(b.typeKey).serialize(c, {
            includeId: !1
        });
        var e = a.serializerFor(b.typeKey).primaryKey;
        return e && delete d[e], this.ajax(this.buildURL(b.typeKey), "POST", {
            data: d
        });
    },
    deleteRecord: function(a, b, c) {
        var d = get(c, "id");
        return console.log(d), this.ajax(this.buildURL(b.typeKey, d), "DELETE", {
            data: d
        });
    },
    updateRecord: function(a, b, c) {
        var d = {};
        return d = a.serializerFor(b.typeKey).serialize(c, {
            includeId: !0
        }), this.ajax(this.buildURL(b.typeKey, d.id), "PUT", {
            data: d
        }, c);
    },
    ajax: function(a, b, c, d) {
        var e = get(this, "antiForgeryTokenSelector");
        if (e) {
            var f = $(e).val();
            f && (this.headers = {
                RequestVerificationToken: f
            });
        }
        var g = this;
        return new Ember.RSVP.Promise(function(e, f) {
            if (c = c || {}, c.url = a, c.type = b, c.dataType = "json", c.context = g, console.log("here"), 
            c.crossDomain = !0, c.data && "GET" !== b && (c.contentType = "application/json; charset=utf-8", 
            c.data = JSON.stringify(c.data)), void 0 !== g.headers) {
                var h = g.headers;
                c.beforeSend = function(a) {
                    forEach.call(Ember.keys(h), function(b) {
                        a.setRequestHeader(b, h[b]);
                    });
                };
            }
            c.success = function(a) {
                void 0 === a && "PUT" === b ? d.send("didCommit") : Ember.run(null, e, a);
            }, c.error = function(a) {
                a && (a.then = null), Ember.run(null, f, a);
            }, Ember.$.ajax(c);
        });
    }
}), App.ApplicationAdapter = DS.RESTAdapter.extend({
    host: "http://localhost:8082/api"
}), App.Store = DS.Store.extend({});

var get = Ember.get;

DS.WebAPISerializer = DS.RESTSerializer.extend({
    extractSingle: function(a, b, c) {
        var d = b.typeKey, e = d, f = {};
        return f[e] = c, c = f, this._super.apply(this, arguments);
    },
    extractArray: function(a, b, c) {
        return c;
    }
}), App.Subject = DS.Model.extend({
    firstName: DS.attr("string"),
    middleName: DS.attr("string"),
    lastName: DS.attr("string"),
    address: DS.attr("string"),
    zipCode: DS.attr("string"),
    city: DS.attr("string"),
    state: DS.attr("string"),
    country: DS.attr("string"),
    email: DS.attr("string"),
    homePhone: DS.attr("string"),
    workPhone: DS.attr("string"),
    cellPhone: DS.attr("string"),
    alternatedCellPhone: DS.attr("string"),
    birthday: DS.attr("date"),
    gender: DS.attr("string"),
    height: DS.attr("number"),
    weight: DS.attr("number"),
    heartRate: DS.attr("string"),
    bloodPreasure: DS.attr("string"),
    race: DS.attr("string"),
    ethnicity: DS.attr("string"),
    maritalStatus: DS.attr("string"),
    guardian: DS.belongsTo("guardian"),
    medications: DS.hasMany("medication"),
    conditions: DS.hasMany("condition"),
    alergies: DS.hasMany("alergy"),
    immunizations: DS.hasMany("immunization"),
    procedures: DS.hasMany("procedure"),
    fullName: function() {
        var a = " " + this.get("middleName");
        return a.length > 1 && (a += " "), this.get("firstName") + a + this.get("lastName");
    }.property("firstName", "middleName", "lastName")
}), App.Guardian = DS.Model.extend({
    name: DS.attr("string"),
    relationShip: DS.attr("string"),
    facilityType: DS.attr("string"),
    facility: DS.attr("string"),
    address: DS.attr("string"),
    email: DS.attr("string"),
    phone: DS.attr("string")
}), App.Medication = DS.Model.extend({
    name: DS.attr("string"),
    dosage: DS.attr("string"),
    from: DS.attr("date"),
    to: DS.attr("date"),
    comments: DS.attr("string")
}), App.Condition = DS.Model.extend({
    name: DS.attr("string"),
    since: DS.attr("date"),
    comments: DS.attr("string")
}), App.Alergy = DS.Model.extend({
    name: DS.attr("string"),
    reaction: DS.attr("string"),
    reactionOn: DS.attr("date"),
    comments: DS.attr("string")
}), App.Immunization = DS.Model.extend({
    name: DS.attr("string"),
    administeredOn: DS.attr("date"),
    comments: DS.attr("string")
}), App.Procedure = DS.Model.extend({
    name: DS.attr("string"),
    performedOn: DS.attr("date"),
    comments: DS.attr("string")
}), App.Subject.reopenClass({
    FIXTURES: [ {
        id: 1,
        name: "Jorge",
        age: 25
    }, {
        id: 2,
        name: "Javier",
        age: 30
    } ]
}), App.SubjectController = Ember.ObjectController.extend({
    isEditing: !1,
    actions: {
        edit: function() {
            this.set("isEditing", !0);
        },
        doneEditing: function() {
            var a = this.get("model");
            a.save(), this.set("isEditing", !1);
        },
        "delete": function() {
            var a = this.get("model");
            a.destroyRecord();
        }
    }
}), App.SubjectsController = Ember.ObjectController.extend({
    isSearching: !1,
    actions: {
        search: function() {
            var a = this.get("searchPattern"), b = this.store.all("subject");
            a && (this.set("isSearching", !0), this.set("model", b.filter(function(b) {
                return b.get("name").toLowerCase().match(a.toLowerCase());
            })));
        },
        doneSearch: function() {
            this.set("isSearching", !1), this.set("model", this.store.all("subject")), this.transitionToRoute("subjects");
        }
    }
}), App.SubjectsAddController = Ember.ObjectController.extend({
    actions: {
        add: function() {
            var a = this.store.createRecord("subject", {
                name: this.get("name"),
                age: this.get("age")
            });
            a.save(), this.set("name", ""), this.set("age", ""), this.transitionToRoute("subjects");
        }
    }
});